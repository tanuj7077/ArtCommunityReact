(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[5],{106:function(e,t,n){"use strict";n.r(t);var c=n(3),a=n(5),s=n(2),i=n(26),r=n.n(i),o=n(39),u=(n(8),n(1));t.default=function(){var e=Object(s.useReducer)((function(e,t){switch(t.type){case"STACK_IMAGES":return Object(a.a)(Object(a.a)({},e),{},{images:e.images.concat(t.images)});case"FETCHING_IMAGES":return Object(a.a)(Object(a.a)({},e),{},{fetching:t.fetching});default:return e}}),{images:[],fetching:!0}),t=Object(c.a)(e,2),n=t[0],f=t[1],b=Object(s.useReducer)((function(e,t){switch(t.type){case"ADVANCE_PAGE":return Object(a.a)(Object(a.a)({},e),{},{page:e.page+1});default:return e}}),{page:1}),j=Object(c.a)(b,2),p=j[0],g=j[1];Object(s.useEffect)((function(){f({type:"FETCHING_IMAGES",fetching:!0}),fetch("/posts/postList?page=".concat(p.page,"&limit=12")).then((function(e){return e.json()})).then((function(e){f({type:"STACK_IMAGES",images:e}),f({type:"FETCHING_IMAGES",fetching:!1})})).catch((function(e){return f({type:"FETCHING_IMAGES",fetching:!1}),e}))}),[f,p.page]);var O=Object(s.useRef)(null),d=Object(s.useCallback)((function(e){new IntersectionObserver((function(e){e.forEach((function(e){e.intersectionRatio>0&&(g({type:"ADVANCE_PAGE"}),console.log(p.page))}))})).observe(e)}),[g]);return Object(s.useEffect)((function(){O.current&&d(O.current)}),[d,O]),Object(u.jsxs)("div",{className:"main",children:[Object(u.jsx)("div",{className:"subHeading",children:"Discover"}),Object(u.jsx)(i.ResponsiveMasonry,{columnsCountBreakPoints:{350:1,600:2,750:2,900:3,1e3:4},children:Object(u.jsx)(r.a,{children:n.images.map((function(e){return Object(u.jsx)(o.a,Object(a.a)({},e),e.name)}))})}),n.fetching&&Object(u.jsx)("span",{className:"loadingAnim",children:"Loading..."}),Object(u.jsx)("div",{id:"page-bottom-boundary",style:{border:"10px solid transparent"},ref:O})]})}}}]);
//# sourceMappingURL=5.983c9529.chunk.js.map